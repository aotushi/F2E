---
alias: 函数作用域
---

#programming/Front-end/javascript/scope/函数作用域 


### 函数作用域

#### 概述

> 函数作用域的含义是指，属于这个函数的全部变量都可以在整个函数的范围内使用及复用（事实上在嵌套的作用域中也可以使用）

* 函数的作用域由函数的定义位置决定,和函数的调用位置无关

* 函数作用域在函数调用时创建，在调用结束时销毁  
* 函数每次调用都会产生一个新的函数作用域，函数作用域与函数作用域之间相互独立
* 在函数作用域中声明的变量是 局部变量,只能在函数内部访问，无法被外部访问

* 在函数内部，使用var声明的变量和使用function开头的函数也会被提升

* 如果在函数内部声明变量时，省略var或let，则变量默认会成为全局变量(不希望出现的情况)



#### 设计优劣

* 充分利用JavaScript变量可以根据需要改变值类型的“动态”特性。 (???? 哪里有应用?
* 不细心处理变量,带来意想不到的问题.(????



#### 基于作用域隐藏变量和函数

> 在任意代码片段外部添加包装函数，可以将内部的变量和函数定义“隐藏”起来，外部作用域无法访问包装函数内部的任何内容。

**原因**

大都是从<span style="color:blue">最小特权原则(最小授权 / 最小暴露)</span>中引申出来的。这个原则是指在软件设计中，应该最小限度地暴露必要内容，而将其他内容都“隐藏”起来，比如某个模块或对象的API设计。

**隐藏作用域优点**

* 避免暴漏过多的变量或函数，实现私有化
* 避免同名标识符之间的冲突, 冲突会导致变量的值被意外覆盖。

**避免标识符冲突的实例**

<u>1. 全局命名空间中的第三方库</u>

这些库通常会在全局作用域中声明一个变量，通常是一个对象。这个对象被用作库的命名空间，所有需要暴露给外界的功能都会成为这个对象（命名空间）的属性，而不是将自己的标识符暴露在顶级的词法作用域中。

<u>2.模块管理</u>

使用任意模块管理器，任何库都无需将标识符加入到全局作用域中，而是通过依赖管理器的机制将库的标识符显式地导入到另外一个特定的作用域中



**使用函数隐藏作用域存在的问题**

具名函数本身就会污染所在作用域,没有函数名又该如何运行?

解决: 立即执行函数表达式

匿名函数表达式的缺点:

回答: 具体查看本笔记中 函数 >匿名和具名函数 > 缺点



**最佳实践**

推荐始终给匿名函数表达式添加函数名称, 编程具名函数表达式(行内函数表达式)

```javascript
setTimeout(function timeoutHandle() {
  console.log('...')
}, 1000)
```



**IIFE  立即执行函数表达式** 实践

优势:

1.不会污染所在作用域,不用通过函数名调用运行

用法:

1.两种使用形式

2.当做函数调用并传递参数

3.倒置代码运行顺序,将需要的函数放在第二位,在IIFE执行后当做参数传递进去



**原笔记内容**

- 在函数内定义的变量不能在函数之外的任何地方访问 || 一个函数可以访问定义在其范围内的任何变量和函数
- 定义在全局域中的函数可以访问所有定义在全局域中的变量。
- 在一个函数中定义的函数也可以访问在其父函数中定义的所有变量和父函数有权访问的任何其他变量


