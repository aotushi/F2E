## 来源
https://www.jb51.net/javascript/318937cds.htm


## 3种方案
* rem+font-size
* vm
* scale


## rem+font-size
> 动态设置HTML根字体大小和body字体大小，会使用到[lib-flexible.js插件](https://github.com/amfe/lib-flexible/blob/2.0/index.js)
### 设置步骤
#### 1.将lib-flexible.js引入根目录
将这段代码放到项目中并引用.其原理是将将设计稿(1920px)均分成24等份,每一份为80px。将这个值设置为html字体大小，既1rem = 80px； 24rem = 1920px。
tips：rem是根据html字体大小来计算的，假如html字体为16px，则1rem就等于16px；
![[Pasted image 20240417090306.png]]
```js
(function flexible(window, document) {
  var docEl = document.documentElement
  var dpr = window.devicePixelRatio || 1

  // adjust body font size
  function setBodyFontSize() {
    if (document.body) {
      document.body.style.fontSize = (16 * dpr) + 'px'
    }
    else {
      document.addEventListener('DOMContentLoaded', setBodyFontSize)
    }
  }
  setBodyFontSize();

  function setRemUnit() {
    var rem = docEl.clientWidth / 24
    docEl.style.fontSize = rem + 'px'
  }

  setRemUnit()

  // reset rem unit on page resize
  window.addEventListener('resize', setRemUnit)
  window.addEventListener('pageshow', function (e) {
    if (e.persisted) {
      setRemUnit()
    }
  })

  // detect 0.5px supports
  if (dpr >= 2) {
    var fakeBody = document.createElement('body')
    var testElement = document.createElement('div')
    testElement.style.border = '.5px solid transparent'
    fakeBody.appendChild(testElement)
    docEl.appendChild(fakeBody)
    if (testElement.offsetHeight === 1) {
      docEl.classList.add('hairlines')
    }
    docEl.removeChild(fakeBody)
  }
}(window, document))
```


#### 2.在vscode中使用插件`px to rem & rpx & vm(cssrem)`
**作用**: 我们在写px的时候,此插件会自动帮我们转换成rem.

安装`cssrem`插件，根节点的字体大小设置为80px。这个是px单位转rem的参考值。
![[Pasted image 20240417085520.png]]

配置插件的值: 将根字体大小设置为80px. 
![[Pasted image 20240417085557.png]]

### 案例
将下面这个html文件以浏览器打开后, 分别在不同的分辨率下查看(`1920*1080, 3840*2160, 7680*2160`)
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      body {
        width: 24rem;
        height: 13.5rem;
        border: 3px solid red;
        box-sizing: border-box;
      }
      ul {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        width: 100%;
        height: 100%;
      }

      li {
        width: 33.333%;
        height: 50%;
        font-size: 0.375rem;
        list-style: none;
        border: 3px solid green;
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
      <li>6</li>
    </ul>
  </body>
  <script src="./js/lib-flexible.js"></script>
</html>
```

**1920 × 1080**
![[Pasted image 20240417092236.png]]


**3840 × 2160**
3840也是分成24等份：3840 / 24 = 160
![[Pasted image 20240417092305.png]]

**7680 × 2160超宽屏**
超宽屏情况下只显示了上半部分，这种适配方式比较适合16：9的情况下使用，后面会有其他方案解决这个问题。
![[Pasted image 20240417092337.png]]