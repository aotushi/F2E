
# æ€§èƒ½ä¼˜åŒ–èµ„æº
* https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkxNTIwMzU5OQ==&action=getalbum&album_id=1783331624198144008&scene=173&from_msgid=2247493765&from_itemidx=1&count=3&nolastread=1#wechat_redirect

* [barretlee/performance-column: ğŸš… æ€§èƒ½ä¸“æ ](https://github.com/barretlee/performance-column)
* [èŠä¸€èŠå‰ç«¯æ€§èƒ½ä¼˜åŒ– - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6911472693405548557)
* [ğŸ”¥ 2022 å‰ç«¯æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000041753539)
* [å‰ç«¯æ€§èƒ½ä¼˜åŒ– 24 æ¡å»ºè®®(2020) - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/121056616?utm_source=com.microsoft.todos&utm_medium=social&utm_oi=41541510889472)

å¾…åŠ
- [ ] https://github.com/thedaviddias/Front-End-Performance-Checklist
# æ€§èƒ½ä¼˜åŒ–(é›…è™å†›è§„)


## èƒŒæ™¯

>æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºäº†æä¾›ç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒï¼Œè¿™äº›ä½“éªŒåŒ…å«è¿™å‡ ä¸ªæ–¹é¢ï¼š**å±•ç¤ºæ›´å¿«**ã€**äº¤äº’å“åº”å¿«**ã€**é¡µé¢æ— å¡é¡¿æƒ…å†µ**ã€‚
 æ›´è¯¦ç»†çš„è¯´ï¼Œå°±æ˜¯æŒ‡ï¼Œåœ¨ç”¨æˆ·è¾“å…¥urlåˆ°ç«™ç‚¹å®Œæ•´æŠŠæ•´ä¸ªé¡µé¢å±•ç¤ºå‡ºæ¥çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å„ç§ä¼˜åŒ–ç­–ç•¥å’Œæ–¹æ³•ï¼Œè®©é¡µé¢åŠ è½½æ›´å¿«ï¼›åœ¨ç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè®©ç”¨æˆ·çš„æ“ä½œå“åº”æ›´åŠæ—¶ï¼Œæœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚





## é›…è™å†›è§„å›¾
![](https://image-static.segmentfault.com/984/490/984490192-6265650bc7d5b)



#### cookie
* å‡å°‘cookieå¤§å°
* é™æ€èµ„æºä¸éœ€è¦cookieï¼Œå¯ä»¥é‡‡ç”¨å…¶ä»–çš„åŸŸåï¼Œä¸ä¼šä¸»åŠ¨å¸¦ä¸Šcookie

#### content
* å‡å°‘httpè¯·æ±‚
* å‡å°‘NDSæŸ¥è¯¢
* é¿å…é‡å®šå‘
* ç¼“å­˜ajaxè¯·æ±‚
* å»¶è¿ŸåŠ è½½
* é¢„åŠ è½½
* å‡å°‘DOMèŠ‚ç‚¹æ•°é‡
* å°½é‡å‡å°‘iframeä½¿ç”¨
* é¿å…404
* åˆ’åˆ†å†…å®¹åˆ°ä¸åŒçš„åŸŸå


#### images
* ä¼˜åŒ–å›¾ç‰‡
* ä½¿ç”¨css spriteä¼˜åŒ–
* ä¸è¦åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡
* ä½¿ç”¨Favicon.iconå°½å¯èƒ½å°ä¸”å¯ç¼“å­˜

#### css
* æŠŠæ ·å¼å†™åœ¨`<head>`ä¸­
* ä¸è¦ä½¿ç”¨cssè¡¨è¾¾å¼
* ä½¿ç”¨linkä»£æ›¿`@import`
* é¿å…ä½¿ç”¨Filters

#### javascript
* JSæ”¾åœ¨åº•éƒ¨
* æŠŠJSå’Œcssæ”¾åœ¨å¤–éƒ¨æ–‡ä»¶ä¸­
* å‹ç¼©JSå’Œcss
* ç§»é™¤é‡å¤è„šæœ¬
* å‡å°‘domæ“ä½œ
* ä½¿ç”¨é«˜æ•ˆçš„äº‹ä»¶å¤„ç†

#### mobile
* ä¿æŒå•ä¸ªæ–‡ä»¶å°äº25k
* æŠŠæ‰“åŒ…çš„å†…å®¹åˆ†ä¸ºå¤šæ®µæ–‡æ¡£

#### server
* ä½¿ç”¨cdn
* æ·»åŠ Expiresæˆ–cache-controlç¼“å­˜å¤´
* å¯ç”¨Gzip
* é…ç½®Etags
* å°½æ—©è¾“å‡ºç¼“å†²?
* ajaxä½¿ç”¨getè¯·æ±‚
* é¿å…å›¾ç‰‡srcä¸ºç©º



#### æ€»ç»“

#### é¿å…è¿‡å¤šçš„å›æµå’Œé‡ç»˜
è¿ç»­è§¦å‘é¡µé¢å›æµæ“ä½œ
```js
//è¿™æ®µä»£ç çš„å®ç°å’Œç¤ºæ„å›¾æ„Ÿè§‰ä¸ç›¸ç¬¦
  let cards = document.getElementsByClassName("MuiPaper-rounded");
  const update = (timestamp) => {
    for (let i = 0; i <cards.length; i++) {
      let top = cards[i].offsetTop;
      cards[i].style.width = ((Math.sin(cards[i].offsetTop + timestamp / 100 + 1) * 500) + 'px')
    }
    window.requestAnimationFrame(update)
  }
  update(1000);
```

<iframe src="https://codesandbox.io/embed/bom-requestanimationframe-wtc5bn?fontsize=14&hidenavigation=1&theme=dark"
     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
     title="bom-requestAnimationFrame"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>





# æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡


#### ç›‘å¬çª—å£æ¿€æ´»çŠ¶æ€

```js
//çª—å£æ¿€æ´»çŠ¶æ€ç›‘å¬
let vEvent = 'visibilitychange';
if (document.webkitHidden != undefined) {
    vEvent = 'webkitvisibilitychange';
}

function visibilityChanged() {
    if (document.hidden || document.webkitHidden) {
        document.title = 'å®¢å®˜ï¼Œåˆ«èµ°å•Š~'
        console.log("Web page is hidden.")
    } else {
        document.title = 'å®¢å®˜ï¼Œä½ åˆå›æ¥äº†å‘¢~'
        console.log("Web page is visible.")
    }
}

document.addEventListener(vEvent, visibilityChanged, false);
```


#### è§‚å¯Ÿé•¿ä»»åŠ¡(performanceä¸­çš„Task)
```js
const observer = new PerformanceObserver((list) => {
    for (const entry of list.getEntries()) {
        console.log(entry)
    }
})

observer.observe({entryTypes: ['longtask']})
```


#### ç›‘å¬ç½‘ç»œå˜åŒ–
ç½‘ç»œå˜åŒ–æ—¶ç»™ç”¨æˆ·åé¦ˆç½‘ç»œé—®é¢˜ï¼Œæœ‰æ—¶å€™çœ‹ç›´æ’­çš„æ—¶å€™è‡ªå·±çš„ç½‘ç»œå¡é¡¿ï¼Œç›´æ’­å¹³å°ä¹Ÿä¼šæé†’ä½ æˆ–è€…è‡ªåŠ¨ç»™ä½ åˆ‡æ¢æ¸…æ™°åº¦
```js
var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
var type = connection.effectiveType;

function updateConnectionStatus() {
  console.log("Connection type changed from " + type + " to " + connection.effectiveType);
  type = connection.effectiveType;
}

connection.addEventListener('change', updateConnectionStatus);
```


#### è®¡ç®—DOMContentLoadedæ—¶é—´

```js
window.addEventListener('DOMContentLoaded', (event) => {
    let timing = performance.getEntriesByType('navigation')[0];
    console.log(timing.domInteractive);
    console.log(timing.fetchStart);
    let diff = timing.domInteractive - timing.fetchStart;
    console.log("TTI: " + diff);
})
```

#### æ›´å¤šè®¡ç®—è§„åˆ™
```md
DNS è§£æè€—æ—¶: domainLookupEnd - domainLookupStart
TCP è¿æ¥è€—æ—¶: connectEnd - connectStart
SSL å®‰å…¨è¿æ¥è€—æ—¶: connectEnd - secureConnectionStart
ç½‘ç»œè¯·æ±‚è€—æ—¶ (TTFB): responseStart - requestStart
æ•°æ®ä¼ è¾“è€—æ—¶: responseEnd - responseStart
DOM è§£æè€—æ—¶: domInteractive - responseEnd
èµ„æºåŠ è½½è€—æ—¶: loadEventStart - domContentLoadedEventEnd
First Byteæ—¶é—´: responseStart - domainLookupStart
ç™½å±æ—¶é—´: responseEnd - fetchStart
é¦–æ¬¡å¯äº¤äº’æ—¶é—´: domInteractive - fetchStart
DOM Ready æ—¶é—´: domContentLoadEventEnd - fetchStart
é¡µé¢å®Œå…¨åŠ è½½æ—¶é—´: loadEventStart - fetchStart
http å¤´éƒ¨å¤§å°ï¼š transferSize - encodedBodySize
é‡å®šå‘æ¬¡æ•°ï¼šperformance.navigation.redirectCount
é‡å®šå‘è€—æ—¶: redirectEnd - redirectStart
```



### Network

Chromeæµè§ˆå™¨æ§åˆ¶å°ä¸­Networké€‰é¡¹ä¸‹,å¯ä»¥çœ‹åˆ°èµ„æºåŠ è½½è¯¦æƒ…ï¼Œåˆæ­¥è¯„ä¼°å½±å“`é¡µé¢æ€§èƒ½`çš„å› ç´ ã€‚
é¼ æ ‡å³é”®å¯ä»¥è‡ªå®šä¹‰é€‰é¡¹å¡ï¼Œé¡µé¢åº•éƒ¨æ˜¯å½“å‰åŠ è½½èµ„æºçš„ä¸€ä¸ªæ¦‚è§ˆã€‚`DOMContentLoaded`Â DOMæ¸²æŸ“å®Œæˆçš„æ—¶é—´ï¼Œ`Load`ï¼šå½“å‰é¡µé¢æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆçš„æ—¶é—´
![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62898f76c242450eb318b1816428ff65~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

ä½¿ç”¨**ctrl+shift+P**æ¥è°ƒå‡ºæ§åˆ¶å°æ‰©å±•å·¥å…·,æ·»åŠ è§„åˆ™


#### **ç€‘å¸ƒæµwaterfall**
![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1613fbeaffb64587a36613271ecfcade~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

-   `Queueing`Â æµè§ˆå™¨å°†èµ„æºæ”¾å…¥é˜Ÿåˆ—æ—¶é—´
-   `Stalled`Â å› æ”¾å…¥é˜Ÿåˆ—æ—¶é—´è€Œå‘ç”Ÿçš„åœæ»æ—¶é—´
-   `DNS Lookup`Â DNSè§£ææ—¶é—´
-   `Initial connection`Â å»ºç«‹HTTPè¿æ¥çš„æ—¶é—´
-   `SSL`Â æµè§ˆå™¨ä¸æœåŠ¡å™¨å»ºç«‹å®‰å…¨æ€§è¿æ¥çš„æ—¶é—´
-   `TTFB`Â ç­‰å¾…æœåŠ¡ç«¯è¿”å›æ•°æ®çš„æ—¶é—´
-   `Content Download`Â æµè§ˆå™¨ä¸‹è½½èµ„æºçš„æ—¶é—´


### Lighthouse
-   `First Contentful Paint`Â é¦–å±æ¸²æŸ“æ—¶é—´ï¼Œ1sä»¥å†…ç»¿è‰²
-   `Speed Index`Â é€Ÿåº¦æŒ‡æ•°ï¼Œ4sä»¥å†…ç»¿è‰²
-   `Time to Interactive`Â åˆ°é¡µé¢å¯äº¤æ¢çš„æ—¶é—´

æ ¹æ®chromeçš„ä¸€äº›ç­–ç•¥è‡ªåŠ¨å¯¹ç½‘ç«™åšä¸€ä¸ªè´¨é‡è¯„ä¼°ï¼Œå¹¶ä¸”ä¼šç»™å‡ºä¸€äº›ä¼˜åŒ–çš„å»ºè®®ã€‚



### Performance
å¯¹ç½‘ç«™æœ€ä¸“ä¸šçš„åˆ†æ~åé¢ä¼šå¤šæ¬¡è®²åˆ°



### webPageTest
å¯ä»¥æ¨¡æ‹Ÿä¸åŒåœºæ™¯ä¸‹è®¿é—®çš„æƒ…å†µï¼Œæ¯”å¦‚æ¨¡æ‹Ÿä¸åŒæµè§ˆå™¨ã€ä¸åŒå›½å®¶ç­‰ç­‰ï¼Œåœ¨çº¿æµ‹è¯•åœ°å€ï¼š[webPageTest](https://link.juejin.cn/?target=https%3A%2F%2Fwww.webpagetest.org%2F "https://www.webpagetest.org/")

ä¸‹é¢æ˜¯ä¸¤å¼ ç¤ºæ„å›¾:
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1da6a84b5944311a4f8c6f78b2f5fa1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2fd7f9c05be47bb80ad67064fc72917~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)



### èµ„æºæ‰“åŒ…åˆ†æ

#### webpack-bundle-analyzer


### å¼€å¯sourcemap
`bpack.config.js`

```java
module.exports = {
    mode: 'production',
    devtool: 'hidden-source-map',
}
å¤åˆ¶ä»£ç 
```

`package.json`

```json
"analyze": "source-map-explorer 'build/*.js'",
å¤åˆ¶ä»£ç 
```

`npm run analyze`

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2057c48588f942579c235925d943c162~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)




# ä¼˜åŒ–-é¡µé¢æ¸²æŸ“

## http
### å‡å°‘httpè¯·æ±‚
ä¸€ä¸ªå®Œæ•´çš„ HTTP è¯·æ±‚éœ€è¦ç»å† DNS æŸ¥æ‰¾ï¼ŒTCP æ¡æ‰‹ï¼Œæµè§ˆå™¨å‘å‡º HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶å‘å›å“åº”ï¼Œæµè§ˆå™¨æ¥æ”¶å“åº”ç­‰è¿‡ç¨‹ã€‚
æ¥ä¸‹æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­å¸®åŠ©ç†è§£ HTTP ï¼š
![](https://pic4.zhimg.com/80/v2-ff4da0780527ab348f5594c04da5d667_1440w.webp)


åè¯è§£é‡Šï¼š
-   Queueing: åœ¨è¯·æ±‚é˜Ÿåˆ—ä¸­çš„æ—¶é—´ã€‚
-   Stalled: ä»TCP è¿æ¥å»ºç«‹å®Œæˆï¼Œåˆ°çœŸæ­£å¯ä»¥ä¼ è¾“æ•°æ®ä¹‹é—´çš„æ—¶é—´å·®ï¼Œæ­¤æ—¶é—´åŒ…æ‹¬ä»£ç†åå•†æ—¶é—´ã€‚
-   Proxy negotiation: ä¸ä»£ç†æœåŠ¡å™¨è¿æ¥è¿›è¡Œåå•†æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚
-   DNS Lookup: æ‰§è¡ŒDNSæŸ¥æ‰¾æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œé¡µé¢ä¸Šçš„æ¯ä¸ªä¸åŒçš„åŸŸéƒ½éœ€è¦è¿›è¡ŒDNSæŸ¥æ‰¾ã€‚
-   Initial Connection / Connecting: å»ºç«‹è¿æ¥æ‰€èŠ±è´¹çš„æ—¶é—´ï¼ŒåŒ…æ‹¬TCPæ¡æ‰‹/é‡è¯•å’Œåå•†SSLã€‚
-   SSL: å®ŒæˆSSLæ¡æ‰‹æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚
-   Request sent: å‘å‡ºç½‘ç»œè¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œé€šå¸¸ä¸ºä¸€æ¯«ç§’çš„æ—¶é—´ã€‚
-   Waiting(TFFB): TFFB æ˜¯å‘å‡ºé¡µé¢è¯·æ±‚åˆ°æ¥æ”¶åˆ°åº”ç­”æ•°æ®ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´ã€‚
-   Content Download: æ¥æ”¶å“åº”æ•°æ®æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚

ä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼ŒçœŸæ­£ä¸‹è½½æ•°æ®çš„æ—¶é—´å æ¯”ä¸ºÂ `13.05 / 204.16 = 6.39%`ï¼Œæ–‡ä»¶è¶Šå°ï¼Œè¿™ä¸ªæ¯”ä¾‹è¶Šå°ï¼Œæ–‡ä»¶è¶Šå¤§ï¼Œæ¯”ä¾‹å°±è¶Šé«˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦å»ºè®®å°†å¤šä¸ªå°æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œä»è€Œå‡å°‘ HTTP è¯·æ±‚æ¬¡æ•°çš„åŸå› ã€‚

### ä½¿ç”¨http2
HTTP2 ç›¸æ¯” HTTP1.1 æœ‰å¦‚ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š

**è§£æé€Ÿåº¦å¿«**
æœåŠ¡å™¨è§£æ HTTP1.1 çš„è¯·æ±‚æ—¶ï¼Œå¿…é¡»ä¸æ–­åœ°è¯»å…¥å­—èŠ‚ï¼Œç›´åˆ°é‡åˆ°åˆ†éš”ç¬¦ CRLF ä¸ºæ­¢ã€‚è€Œè§£æ HTTP2 çš„è¯·æ±‚å°±ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼Œå› ä¸º HTTP2 æ˜¯åŸºäºå¸§çš„åè®®ï¼Œæ¯ä¸ªå¸§éƒ½æœ‰è¡¨ç¤ºå¸§é•¿åº¦çš„å­—æ®µã€‚

**å¤šè·¯å¤ç”¨**
HTTP1.1 å¦‚æœè¦åŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚ï¼Œå°±å¾—å»ºç«‹å¤šä¸ª TCP è¿æ¥ï¼Œå› ä¸ºä¸€ä¸ª TCP è¿æ¥åŒæ—¶åªèƒ½å¤„ç†ä¸€ä¸ª HTTP1.1 çš„è¯·æ±‚ã€‚
åœ¨ HTTP2 ä¸Šï¼Œå¤šä¸ªè¯·æ±‚å¯ä»¥å…±ç”¨ä¸€ä¸ª TCP è¿æ¥ï¼Œè¿™ç§°ä¸ºå¤šè·¯å¤ç”¨ã€‚åŒä¸€ä¸ªè¯·æ±‚å’Œå“åº”ç”¨ä¸€ä¸ªæµæ¥è¡¨ç¤ºï¼Œå¹¶æœ‰å”¯ä¸€çš„æµ ID æ¥æ ‡è¯†ã€‚ å¤šä¸ªè¯·æ±‚å’Œå“åº”åœ¨ TCP è¿æ¥ä¸­å¯ä»¥ä¹±åºå‘é€ï¼Œåˆ°è¾¾ç›®çš„åœ°åå†é€šè¿‡æµ ID é‡æ–°ç»„å»ºã€‚

**é¦–éƒ¨å‹ç¼©**
HTTP2 æä¾›äº†é¦–éƒ¨å‹ç¼©åŠŸèƒ½ã€‚

**ä¼˜å…ˆçº§**

HTTP2 å¯ä»¥å¯¹æ¯”è¾ƒç´§æ€¥çš„è¯·æ±‚è®¾ç½®ä¸€ä¸ªè¾ƒé«˜çš„ä¼˜å…ˆçº§ï¼ŒæœåŠ¡å™¨åœ¨æ”¶åˆ°è¿™æ ·çš„è¯·æ±‚åï¼Œå¯ä»¥ä¼˜å…ˆå¤„ç†ã€‚

**æµé‡æ§åˆ¶**

ç”±äºä¸€ä¸ª TCP è¿æ¥æµé‡å¸¦å®½ï¼ˆæ ¹æ®å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„ç½‘ç»œå¸¦å®½è€Œå®šï¼‰æ˜¯å›ºå®šçš„ï¼Œå½“æœ‰å¤šä¸ªè¯·æ±‚å¹¶å‘æ—¶ï¼Œä¸€ä¸ªè¯·æ±‚å çš„æµé‡å¤šï¼Œå¦ä¸€ä¸ªè¯·æ±‚å çš„æµé‡å°±ä¼šå°‘ã€‚æµé‡æ§åˆ¶å¯ä»¥å¯¹ä¸åŒçš„æµçš„æµé‡è¿›è¡Œç²¾ç¡®æ§åˆ¶ã€‚

**æœåŠ¡å™¨æ¨é€**

HTTP2 æ–°å¢çš„ä¸€ä¸ªå¼ºå¤§çš„æ–°åŠŸèƒ½ï¼Œå°±æ˜¯æœåŠ¡å™¨å¯ä»¥å¯¹ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å‘é€å¤šä¸ªå“åº”ã€‚æ¢å¥è¯è¯´ï¼Œé™¤äº†å¯¹æœ€åˆè¯·æ±‚çš„å“åº”å¤–ï¼ŒæœåŠ¡å™¨è¿˜å¯ä»¥é¢å¤–å‘å®¢æˆ·ç«¯æ¨é€èµ„æºï¼Œè€Œæ— éœ€å®¢æˆ·ç«¯æ˜ç¡®åœ°è¯·æ±‚ã€‚

ä¾‹å¦‚å½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œé™¤äº†è¿”å› HTML é¡µé¢å¤–ï¼ŒæœåŠ¡å™¨è¿˜å¯ä»¥æ ¹æ® HTML é¡µé¢ä¸­çš„èµ„æºçš„ URLï¼Œæ¥æå‰æ¨é€èµ„æºã€‚





## JSä¸­çš„æ€§èƒ½ä¼˜åŒ–
#### 1.ä¸è¦è¦†ç›–åŸç”Ÿæ–¹æ³•
> æ— è®ºä½ çš„ JavaScript ä»£ç å¦‚ä½•ä¼˜åŒ–ï¼Œéƒ½æ¯”ä¸ä¸ŠåŸç”Ÿæ–¹æ³•ã€‚å› ä¸ºåŸç”Ÿæ–¹æ³•æ˜¯ç”¨ä½çº§è¯­è¨€å†™çš„ï¼ˆC/C++ï¼‰ï¼Œå¹¶ä¸”è¢«ç¼–è¯‘æˆæœºå™¨ç ï¼Œæˆä¸ºæµè§ˆå™¨çš„ä¸€éƒ¨åˆ†ã€‚å½“åŸç”Ÿæ–¹æ³•å¯ç”¨æ—¶ï¼Œå°½é‡ä½¿ç”¨å®ƒä»¬ï¼Œç‰¹åˆ«æ˜¯æ•°å­¦è¿ç®—å’Œ DOM æ“ä½œã€‚

#### 2.ä½¿ç”¨äº‹ä»¶å§”æ‰˜(ç®€åŒ–DOMæ“ä½œ)


#### 3.JSåŠ¨ç”»
> å°½é‡é¿å…æ·»åŠ å¤§é‡çš„JSåŠ¨ç”»ï¼ŒCSS3åŠ¨ç”»å’Œ Canvas åŠ¨ç”»éƒ½æ¯” JS åŠ¨ç”»æ€§èƒ½å¥½ã€‚  
ä½¿ç”¨`requestAnimationFrame`æ¥ä»£æ›¿`setTimeout`å’Œ`setInterval`ï¼Œå› ä¸º`requestAnimationFrame`å¯ä»¥åœ¨æ­£ç¡®çš„æ—¶é—´è¿›è¡Œæ¸²æŸ“ï¼Œ`setTimeout`Â å’Œ`setInterval`æ— æ³•ä¿è¯æ¸²æŸ“æ—¶æœºã€‚ä¸è¦åœ¨å®šæ—¶å™¨é‡Œé¢ç»‘å®šäº‹ä»¶ã€‚


#### 4.é˜²æŠ–å’ŒèŠ‚æµ
```js
// åœ¨äº‹ä»¶è¢«è§¦å‘nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚
function debounce(func, delay) {
    let time = null;
    return function (...args) {
        const context = this;
        if (time) {
            clearTimeout(time);
        }
        time = setTimeout(() => {
            func.call(context, ...args);
        }, delay);
    };
}
```

```js
// è§„å®šåœ¨ä¸€ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœè¿™ä¸ªå•ä½æ—¶é—´å†…è§¦å‘å¤šæ¬¡å‡½æ•°ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚
function throttle(func, delay) {
    let prevTime = Date.now();
    return function (...args) {
        const context = this;
        let curTime = Date.now();
        if (curTime - prevTime > delay) {
            prevTime = curTime;
            func.call(context, ...args);
        }
    };
}
```


#### æ³¨æ„ç¨‹åºçš„å±€éƒ¨æ€§
ä¸€ä¸ªç¼–å†™è‰¯å¥½çš„è®¡ç®—æœºç¨‹åºå¸¸å¸¸å…·æœ‰è‰¯å¥½çš„å±€éƒ¨æ€§ï¼Œå®ƒä»¬å€¾å‘äºå¼•ç”¨æœ€è¿‘å¼•ç”¨è¿‡çš„æ•°æ®é¡¹é™„è¿‘çš„æ•°æ®é¡¹ï¼Œæˆ–è€…æœ€è¿‘å¼•ç”¨è¿‡çš„æ•°æ®é¡¹æœ¬èº«ï¼Œè¿™ç§å€¾å‘æ€§ï¼Œè¢«ç§°ä¸ºå±€éƒ¨æ€§åŸç†ã€‚æœ‰è‰¯å¥½å±€éƒ¨æ€§çš„ç¨‹åºæ¯”å±€éƒ¨æ€§å·®çš„ç¨‹åºè¿è¡Œå¾—æ›´å¿«ã€‚




## é¡µé¢å…¶å®ƒä¼˜åŒ–()

### é¿å…CSSåŠJSé˜»å¡

#### CSSé˜»å¡
æˆ‘ä»¬æåˆ° DOM å’Œ CSSOM åˆåŠ›æ‰èƒ½æ„å»ºæ¸²æŸ“æ ‘ã€‚è¿™ä¸€ç‚¹ä¼šç»™æ€§èƒ½é€ æˆä¸¥é‡å½±å“ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒCSS æ˜¯é˜»å¡çš„èµ„æºã€‚æµè§ˆå™¨åœ¨æ„å»º CSSOM çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šæ¸²æŸ“ä»»ä½•å·²å¤„ç†çš„å†…å®¹ï¼Œå³ä¾¿ DOM å·²ç»è§£æå®Œæ¯•äº†ã€‚

åªæœ‰å½“æˆ‘ä»¬å¼€å§‹è§£æ HTML åã€è§£æåˆ° link æ ‡ç­¾æˆ–è€… style æ ‡ç­¾æ—¶ï¼ŒCSS æ‰ç™»åœºï¼ŒCSSOM çš„æ„å»ºæ‰å¼€å§‹ã€‚Â å¾ˆå¤šæ—¶å€™ï¼ŒDOM ä¸å¾—ä¸ç­‰å¾… CSSOMã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·æ€»ç»“ï¼š

CSS æ˜¯é˜»å¡æ¸²æŸ“çš„èµ„æºã€‚éœ€è¦å°†å®ƒå°½æ—©ã€å°½å¿«åœ°ä¸‹è½½åˆ°å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿ç¼©çŸ­é¦–æ¬¡æ¸²æŸ“çš„æ—¶é—´ã€‚**å°½æ—©ï¼ˆå°† CSS æ”¾åœ¨ head æ ‡ç­¾é‡Œï¼‰å’Œå°½å¿«ï¼ˆå¯ç”¨ CDN å®ç°é™æ€èµ„æºåŠ è½½é€Ÿåº¦çš„ä¼˜åŒ–ï¼‰**


#### JSé˜»å¡
**JS çš„ä½œç”¨åœ¨äºä¿®æ”¹**ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬ä¿®æ”¹ç½‘é¡µçš„æ–¹æ–¹é¢é¢ï¼šå†…å®¹ã€æ ·å¼ä»¥åŠå®ƒå¦‚ä½•å“åº”ç”¨æˆ·äº¤äº’ã€‚è¿™â€œæ–¹æ–¹é¢é¢â€çš„ä¿®æ”¹ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹ DOM å’Œ CSSDOM è¿›è¡Œä¿®æ”¹ã€‚å› æ­¤ JS çš„æ‰§è¡Œä¼šé˜»æ­¢ CSSOMï¼Œåœ¨æˆ‘ä»¬ä¸ä½œæ˜¾å¼å£°æ˜çš„æƒ…å†µä¸‹ï¼Œå®ƒä¹Ÿä¼šé˜»å¡ DOMã€‚
**JS å¼•æ“æ˜¯ç‹¬ç«‹äºæ¸²æŸ“å¼•æ“å­˜åœ¨çš„**ã€‚æˆ‘ä»¬çš„ JS ä»£ç åœ¨æ–‡æ¡£çš„ä½•å¤„æ’å…¥ï¼Œå°±åœ¨ä½•å¤„æ‰§è¡Œã€‚å½“ HTML è§£æå™¨é‡åˆ°ä¸€ä¸ª script æ ‡ç­¾æ—¶ï¼Œå®ƒä¼šæš‚åœæ¸²æŸ“è¿‡ç¨‹ï¼Œå°†æ§åˆ¶æƒäº¤ç»™ JS å¼•æ“ã€‚JS å¼•æ“å¯¹å†…è”çš„ JS ä»£ç ä¼šç›´æ¥æ‰§è¡Œï¼Œå¯¹å¤–éƒ¨ JS æ–‡ä»¶è¿˜è¦å…ˆè·å–åˆ°è„šæœ¬ã€å†è¿›è¡Œæ‰§è¡Œã€‚ç­‰ JS å¼•æ“è¿è¡Œå®Œæ¯•ï¼Œæµè§ˆå™¨åˆä¼šæŠŠæ§åˆ¶æƒè¿˜ç»™æ¸²æŸ“å¼•æ“ï¼Œç»§ç»­ CSSOM å’Œ DOM çš„æ„å»ºã€‚ å› æ­¤ä¸å…¶è¯´æ˜¯ JS æŠŠ CSS å’Œ HTML é˜»å¡äº†ï¼Œä¸å¦‚è¯´æ˜¯ JS å¼•æ“æŠ¢èµ°äº†æ¸²æŸ“å¼•æ“çš„æ§åˆ¶æƒã€‚

å®é™…ä½¿ç”¨,éœ€éµå¾ªçš„åŸåˆ™:
* å°† CSS æ”¾åœ¨æ–‡ä»¶å¤´éƒ¨ï¼ŒJavaScript æ–‡ä»¶æ”¾åœ¨åº•éƒ¨
- JS åº”å°½é‡å°‘å½±å“ DOM çš„æ„å»º
- æ”¹å˜JSé˜»å¡æ–¹å¼
	- defer(å¹¶è¡Œä¸‹è½½,åœ¨DOMæ¸²æŸ“å®Œæˆåå†æ‰§è¡Œ)
	- async(å¹¶è¡Œä¸‹è½½,ä¸‹è½½å®Œæˆåç«‹å³æ‰§è¡Œ,é˜»å¡domæ¸²æŸ“)


### é™ä½CSSé€‰æ‹©å™¨å¤æ‚æ€§
æµè§ˆå™¨è¯»å–é€‰æ‹©å™¨ï¼Œéµå¾ªçš„åŸåˆ™æ˜¯ä»é€‰æ‹©å™¨çš„å³è¾¹åˆ°å·¦è¾¹è¯»å–ã€‚çœ‹ä¸ªç¤ºä¾‹ï¼š
```css
#block .text p {
    color: red;
}
```
1.  æŸ¥æ‰¾æ‰€æœ‰ P å…ƒç´ ã€‚
2.  æŸ¥æ‰¾ç»“æœ 1 ä¸­çš„å…ƒç´ æ˜¯å¦æœ‰ç±»åä¸º text çš„çˆ¶å…ƒç´ 
3.  æŸ¥æ‰¾ç»“æœ 2 ä¸­çš„å…ƒç´ æ˜¯å¦æœ‰ id ä¸º block çš„çˆ¶å…ƒç´ 

CSS é€‰æ‹©å™¨ä¼˜å…ˆçº§
å†…è” > IDé€‰æ‹©å™¨ > ç±»é€‰æ‹©å™¨ > æ ‡ç­¾é€‰æ‹©å™¨

æ ¹æ®ä»¥ä¸Šä¸¤ä¸ªä¿¡æ¯å¯ä»¥å¾—å‡ºç»“è®ºï¼š

1.  å‡å°‘åµŒå¥—ã€‚åä»£é€‰æ‹©å™¨çš„å¼€é”€æ˜¯æœ€é«˜çš„ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥å°½é‡å°†é€‰æ‹©å™¨çš„æ·±åº¦é™åˆ°æœ€ä½ï¼ˆæœ€é«˜ä¸è¦è¶…è¿‡ä¸‰å±‚ï¼‰ï¼Œå°½å¯èƒ½ä½¿ç”¨ç±»æ¥å…³è”æ¯ä¸€ä¸ªæ ‡ç­¾å…ƒç´ 
2.  å…³æ³¨å¯ä»¥é€šè¿‡ç»§æ‰¿å®ç°çš„å±æ€§ï¼Œé¿å…é‡å¤åŒ¹é…é‡å¤å®šä¹‰
3.  å°½é‡ä½¿ç”¨é«˜ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ ID å’Œç±»é€‰æ‹©å™¨ã€‚
4.  é¿å…ä½¿ç”¨é€šé…ç¬¦ï¼Œåªå¯¹éœ€è¦ç”¨åˆ°çš„å…ƒç´ è¿›è¡Œé€‰æ‹©

### ä½¿ç”¨å­—ä½“å›¾æ ‡ iconfont ä»£æ›¿å›¾ç‰‡å›¾æ ‡
å­—ä½“å›¾æ ‡å°±æ˜¯å°†å›¾æ ‡åˆ¶ä½œæˆä¸€ä¸ªå­—ä½“ï¼Œä½¿ç”¨æ—¶å°±è·Ÿå­—ä½“ä¸€æ ·ï¼Œå¯ä»¥è®¾ç½®å±æ€§ï¼Œä¾‹å¦‚ font-sizeã€color ç­‰ç­‰ï¼Œéå¸¸æ–¹ä¾¿ã€‚å¹¶ä¸”å­—ä½“å›¾æ ‡æ˜¯çŸ¢é‡å›¾ï¼Œä¸ä¼šå¤±çœŸã€‚è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹æ˜¯ç”Ÿæˆçš„æ–‡ä»¶ç‰¹åˆ«å°ã€‚

### å‹ç¼©å­—ä½“æ–‡ä»¶
ä½¿ç”¨Â [fontmin-webpack](https://github.com/patrickhulce/fontmin-webpack)Â æ’ä»¶å¯¹å­—ä½“æ–‡ä»¶è¿›è¡Œå‹ç¼©



### å‡å°‘é‡æµé‡ç»˜

#### å¦‚ä½•è§£å†³?
**CSS**
-   é¿å…ä½¿ç”¨tableå¸ƒå±€ã€‚
-   å°½å¯èƒ½åœ¨DOMæ ‘çš„æœ€æœ«ç«¯æ”¹å˜classã€‚
-   é¿å…è®¾ç½®å¤šå±‚å†…è”æ ·å¼ã€‚
-   å°†åŠ¨ç”»æ•ˆæœåº”ç”¨åˆ°positionå±æ€§ä¸ºabsoluteæˆ–fixedçš„å…ƒç´ ä¸Šã€‚
-   é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ï¼šcalc()ï¼‰ã€‚

**JavaScript**
-   é¿å…é¢‘ç¹æ“ä½œæ ·å¼ï¼Œæœ€å¥½ä¸€æ¬¡æ€§é‡å†™styleå±æ€§ï¼Œæˆ–è€…å°†æ ·å¼åˆ—è¡¨å®šä¹‰ä¸ºclasså¹¶ä¸€æ¬¡æ€§æ›´æ”¹classå±æ€§ã€‚
-   é¿å…é¢‘ç¹æ“ä½œDOMï¼Œåˆ›å»ºä¸€ä¸ªdocumentFragmentï¼Œåœ¨å®ƒä¸Šé¢åº”ç”¨æ‰€æœ‰DOMæ“ä½œï¼Œæœ€åå†æŠŠå®ƒæ·»åŠ åˆ°æ–‡æ¡£ä¸­ã€‚
-   ä¹Ÿå¯ä»¥å…ˆä¸ºå…ƒç´ è®¾ç½®display: noneï¼Œæ“ä½œç»“æŸåå†æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚å› ä¸ºåœ¨displayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸Šè¿›è¡Œçš„DOMæ“ä½œä¸ä¼šå¼•å‘å›æµå’Œé‡ç»˜ã€‚
-   é¿å…é¢‘ç¹è¯»å–ä¼šå¼•å‘å›æµ/é‡ç»˜çš„å±æ€§ï¼Œå¦‚æœç¡®å®éœ€è¦å¤šæ¬¡ä½¿ç”¨ï¼Œå°±ç”¨ä¸€ä¸ªå˜é‡ç¼“å­˜èµ·æ¥ã€‚
-   å¯¹å…·æœ‰å¤æ‚åŠ¨ç”»çš„å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä½¿å®ƒè„±ç¦»æ–‡æ¡£æµï¼Œå¦åˆ™ä¼šå¼•èµ·çˆ¶å…ƒç´ åŠåç»­å…ƒç´ é¢‘ç¹å›æµ



#### 1.éª¨æ¶å±
ç”¨cssæå‰å å¥½ä½ç½®ï¼Œå½“èµ„æºåŠ è½½å®Œæˆå³å¯å¡«å……ï¼Œå‡å°‘é¡µé¢çš„å›æµä¸é‡ç»˜ï¼ŒåŒæ—¶è¿˜èƒ½ç»™ç”¨æˆ·æœ€ç›´æ¥çš„åé¦ˆã€‚ å›¾ä¸­ä½¿ç”¨æ’ä»¶ï¼š[react-placeholder](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fbuildo%2Freact-placeholder "https://github.com/buildo/react-placeholder")
å…³äºå®ç°éª¨æ¶å±è¿˜æœ‰å¾ˆå¤šç§æ–¹æ¡ˆï¼Œç”¨`Puppeteer`æœåŠ¡ç«¯æ¸²æŸ“çš„æŒºå¤šçš„

ä½¿ç”¨cssä¼ªç±»ï¼š[åªè¦csså°±èƒ½å®ç°çš„éª¨æ¶å±æ–¹æ¡ˆ](https://link.juejin.cn/?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000020437426 "https://segmentfault.com/a/1190000020437426")


![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3666ae07b9eb4d839f7a893b89d83f47~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)




#### çª—å£åŒ–

åŸç†ï¼šåªåŠ è½½å½“å‰çª—å£èƒ½æ˜¾ç¤ºçš„DOMå…ƒç´ ï¼Œå½“è§†å›¾å˜åŒ–æ—¶ï¼Œåˆ é™¤éšè—çš„ï¼Œæ·»åŠ è¦æ˜¾ç¤ºçš„DOMå°±å¯ä»¥ä¿è¯é¡µé¢ä¸Šå­˜åœ¨çš„domå…ƒç´ æ•°é‡æ°¸è¿œä¸å¤šï¼Œé¡µé¢å°±ä¸ä¼šå¡é¡¿

å›¾ä¸­ä½¿ç”¨çš„æ’ä»¶ï¼š[react-window](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fbvaughn%2Freact-window "https://github.com/bvaughn/react-window")
![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a459cc811844b7793aff6c9878d19ad~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

å®‰è£…ï¼š`npm i react-window`

å¼•å…¥ï¼š`import { FixedSizeList as List } from 'react-window';`

ä½¿ç”¨ï¼š
```js
const Row = ({ index, style }) => (
  <div style={style}>Row {index}</div>
);
 
const Example = () => (
  <List
    height={150}
    itemCount={1000}
    itemSize={35}
    width={300}
  >
    {Row}
  </List>
);
```


### ç¼“å­˜
ä¸ºäº†é¿å…ç”¨æˆ·æ¯æ¬¡è®¿é—®ç½‘ç«™éƒ½å¾—è¯·æ±‚æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ  Expires æˆ– max-age æ¥æ§åˆ¶è¿™ä¸€è¡Œä¸ºã€‚Expires è®¾ç½®äº†ä¸€ä¸ªæ—¶é—´ï¼Œåªè¦åœ¨è¿™ä¸ªæ—¶é—´ä¹‹å‰ï¼Œæµè§ˆå™¨éƒ½ä¸ä¼šè¯·æ±‚æ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚è€Œ max-age æ˜¯ä¸€ä¸ªç›¸å¯¹æ—¶é—´ï¼Œå»ºè®®ä½¿ç”¨ max-age ä»£æ›¿ Expires ã€‚

ä¸è¿‡è¿™æ ·ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œå½“æ–‡ä»¶æ›´æ–°äº†æ€ä¹ˆåŠï¼Ÿæ€ä¹ˆé€šçŸ¥æµè§ˆå™¨é‡æ–°è¯·æ±‚æ–‡ä»¶ï¼Ÿ

å¯ä»¥é€šè¿‡æ›´æ–°é¡µé¢ä¸­å¼•ç”¨çš„èµ„æºé“¾æ¥åœ°å€ï¼Œè®©æµè§ˆå™¨ä¸»åŠ¨æ”¾å¼ƒç¼“å­˜ï¼ŒåŠ è½½æ–°èµ„æºã€‚

å…·ä½“åšæ³•æ˜¯æŠŠèµ„æºåœ°å€ URL çš„ä¿®æ”¹ä¸æ–‡ä»¶å†…å®¹å…³è”èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰æ–‡ä»¶å†…å®¹å˜åŒ–ï¼Œæ‰ä¼šå¯¼è‡´ç›¸åº” URL çš„å˜æ›´ï¼Œä»è€Œå®ç°æ–‡ä»¶çº§åˆ«çš„ç²¾ç¡®ç¼“å­˜æ§åˆ¶ã€‚ä»€ä¹ˆä¸œè¥¿ä¸æ–‡ä»¶å†…å®¹ç›¸å…³å‘¢ï¼Ÿæˆ‘ä»¬ä¼šå¾ˆè‡ªç„¶çš„è”æƒ³åˆ°åˆ©ç”¨[æ•°æ®æ‘˜è¦è¦ç®—æ³•](https://baike.baidu.com/item/%E6%B6%88%E6%81%AF%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95/3286770?fromtitle=%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95&fromid=12011257)å¯¹æ–‡ä»¶æ±‚æ‘˜è¦ä¿¡æ¯ï¼Œæ‘˜è¦ä¿¡æ¯ä¸æ–‡ä»¶å†…å®¹ä¸€ä¸€å¯¹åº”ï¼Œå°±æœ‰äº†ä¸€ç§å¯ä»¥ç²¾ç¡®åˆ°å•ä¸ªæ–‡ä»¶ç²’åº¦çš„ç¼“å­˜æ§åˆ¶ä¾æ®äº†ã€‚





#### 1.httpç¼“å­˜
##### keep-alive

åˆ¤æ–­æ˜¯å¦å¼€å¯ï¼šçœ‹`response headers`ä¸­æœ‰æ²¡æœ‰`Connection: keep-alive`Â ã€‚å¼€å¯ä»¥åï¼Œçœ‹`network`çš„ç€‘å¸ƒæµä¸­å°±æ²¡æœ‰Â `Initial connection`è€—æ—¶äº†

nginxè®¾ç½®keep-aliveï¼ˆé»˜è®¤å¼€å¯ï¼‰

```ini
# 0 ä¸ºå…³é—­
#keepalive_timeout 0;
# 65sæ— è¿æ¥ å…³é—­
keepalive_timeout 65;
# è¿æ¥æ•°ï¼Œè¾¾åˆ°100æ–­å¼€
keepalive_requests 100;
å¤åˆ¶ä»£ç 
```

##### Cache-Control / Expires / Max-Age

è®¾ç½®èµ„æºæ˜¯å¦ç¼“å­˜ï¼Œä»¥åŠç¼“å­˜æ—¶é—´

##### Etag / If-None-Match

èµ„æºå”¯ä¸€æ ‡è¯†ä½œå¯¹æ¯”ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œä»æœåŠ¡å™¨æ‹‰å–èµ„æºã€‚å¦‚æœæ²¡å˜åŒ–åˆ™å–ç¼“å­˜èµ„æºï¼ŒçŠ¶æ€ç 304ï¼Œä¹Ÿå°±æ˜¯åå•†ç¼“å­˜

##### Last-Modified / If-Modified-Since

é€šè¿‡å¯¹æ¯”æ—¶é—´çš„å·®å¼‚æ¥è§‰å¾—è¦ä¸è¦ä»æœåŠ¡å™¨è·å–èµ„æº

æ›´å¤šHTTPç¼“å­˜å‚æ•°å¯å‚è€ƒï¼š[ä½¿ç”¨ HTTP ç¼“å­˜ï¼šEtag, Last-Modified ä¸ Cache-Control](https://link.juejin.cn/?target=https%3A%2F%2Fharttle.land%2F2017%2F04%2F04%2Fusing-http-cache.html "https://harttle.land/2017/04/04/using-http-cache.html")





#### 2.Service worker
å€ŸåŠ©webpackæ’ä»¶`WorkboxWebpackPlugin`å’Œ`ManifestPlugin`,åŠ è½½serviceWorker.js,é€šè¿‡`serviceWorker.register()`æ³¨å†Œ

```js
new WorkboxWebpackPlugin.GenerateSW({
    clientsClaim: true,
    exclude: [/\.map$/, /asset-manifest\.json$/],
    importWorkboxFrom: 'cdn',
    navigateFallback: paths.publicUrlOrPath + 'index.html',
    navigateFallbackBlacklist: [
        new RegExp('^/_'),
        new RegExp('/[^/?]+\\.[^/]+$'),
    ],
}),

new ManifestPlugin({
    fileName: 'asset-manifest.json',
    publicPath: paths.publicUrlOrPath,
    generate: (seed, files, entrypoints) => {
        const manifestFiles = files.reduce((manifest, file) => {
            manifest[file.name] = file.path;
            return manifest;
        }, seed);
        const entrypointFiles = entrypoints.app.filter(
            fileName => !fileName.endsWith('.map')
        );

        return {
            files: manifestFiles,
            entrypoints: entrypointFiles,
        };
    },
}),
```



#### æµè§ˆå™¨ç¼“å­˜
ç¼“å­˜çš„æ„ä¹‰å°±åœ¨äºå‡å°‘è¯·æ±‚ï¼Œæ›´å¤šåœ°ä½¿ç”¨æœ¬åœ°çš„èµ„æºï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒçš„åŒæ—¶ï¼Œä¹Ÿå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚æ‰€ä»¥ï¼Œæœ€ä½³å®è·µï¼Œå°±åº”è¯¥æ˜¯å°½å¯èƒ½å‘½ä¸­å¼ºç¼“å­˜ï¼ŒåŒæ—¶ï¼Œèƒ½åœ¨æ›´æ–°ç‰ˆæœ¬çš„æ—¶å€™è®©å®¢æˆ·ç«¯çš„ç¼“å­˜å¤±æ•ˆã€‚
åœ¨æ›´æ–°ç‰ˆæœ¬ä¹‹åï¼Œå¦‚ä½•è®©ç”¨æˆ·ç¬¬ä¸€æ—¶é—´ä½¿ç”¨æœ€æ–°çš„èµ„æºæ–‡ä»¶å‘¢ï¼Ÿæœºæ™ºçš„å‰ç«¯ä»¬æƒ³å‡ºäº†ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨æ›´æ–°ç‰ˆæœ¬çš„æ—¶å€™ï¼Œé¡ºä¾¿æŠŠé™æ€èµ„æºçš„è·¯å¾„æ”¹äº†ï¼Œè¿™æ ·ï¼Œå°±ç›¸å½“äºç¬¬ä¸€æ¬¡è®¿é—®è¿™äº›èµ„æºï¼Œå°±ä¸ä¼šå­˜åœ¨ç¼“å­˜çš„é—®é¢˜äº†
```js
entry:{
    main: path.join(__dirname,'./main.js'),
    vendor: ['react', 'antd']
},
output:{
    path:path.join(__dirname,'./dist'),
    publicPath: '/dist/',
    filname: 'bundle.[chunkhash].js'
}
```

ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªè¾ƒä¸ºåˆç†çš„ç¼“å­˜æ–¹æ¡ˆï¼š
- HTMLï¼šä½¿ç”¨åå•†ç¼“å­˜ã€‚
- CSSã€JSå’Œå›¾ç‰‡ï¼šä½¿ç”¨å¼ºç¼“å­˜ï¼Œæ–‡ä»¶å‘½åå¸¦ä¸Šhashå€¼ã€‚

#### æ–‡ä»¶åå“ˆå¸Œ ?
Webpack ç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§å“ˆå¸Œå€¼è®¡ç®—æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯`hash`ã€`chunkhash`å’Œ`contenthash`ã€‚










### é¢„åŠ è½½&æ‡’åŠ è½½

#### preload
å°±æ‹¿demoä¸­çš„å­—ä½“ä¸¾ä¾‹ï¼Œæ­£å¸¸æƒ…å†µä¸‹çš„åŠ è½½é¡ºåºæ˜¯è¿™æ ·çš„ï¼š
![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6e3226bc21f14a41ac195618456bdde9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

å‡å¦‚preload
```html
<link rel="preload" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.119.woff2" as="font" crossorigin="anonymous"/> 
<link rel="preload" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.118.woff2" as="font" crossorigin="anonymous"/> 
<link rel="preload" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.116.woff2" as="font" crossorigin="anonymous"/> 
```

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9790c73b17ef43a9acb1701215aca9d4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)





#### prefetch
åœºæ™¯ï¼šé¦–é¡µä¸éœ€è¦è¿™æ ·çš„å­—ä½“æ–‡ä»¶ï¼Œä¸‹ä¸ªé¡µé¢éœ€è¦ï¼šé¦–é¡µä¼šä»¥æœ€ä½ä¼˜å…ˆçº§Lowestæ¥æå‰åŠ è½½
```html
<link rel="prefetch" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.113.woff2" as="font"/> 
<link rel="prefetch" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.118.woff2" as="font"/> 
<link rel="prefetch" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.117.woff2" as="font"/> 
```

éœ€è¦çš„é¡µé¢ï¼Œä»`prefetch cache`ä¸­å–
![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04a0fe68e9634c20b963d1d2817126ad~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

webpackä¹Ÿæ˜¯æ”¯æŒè¿™ä¸¤ä¸ªå±æ€§çš„:[webpackPrefetch å’Œ webpackPreload](https://link.juejin.cn/?target=https%3A%2F%2Fwww.cnblogs.com%2Fskychx%2Fp%2Fwebpack-webpackChunkName-webpackPreload-webpackPreload.html "https://www.cnblogs.com/skychx/p/webpack-webpackChunkName-webpackPreload-webpackPreload.html")


### æ‡’åŠ è½½
#### å›¾ç‰‡
* æ™®é€šå›¾ç‰‡
* æ¸è¿›å¼å›¾ç‰‡(ç±»ä¼¼é«˜æ–¯æ¨¡ç³Š),éœ€è¦å‡ºç¨¿æ—¶æŒ‡å®šè¿™ç§æ ¼å¼
* `å“åº”å¼å›¾ç‰‡`
åŸç”Ÿæ¨¡å¼ï¼š`<img src="./img/index.jpg" sizes="100vw" srcset="./img/dog.jpg 800w, ./img/index.jpg 1200w"/>`




#### è·¯ç”±
é€šè¿‡å‡½æ•° + importå®ç°

`const Page404 = () => import(/* webpackChunkName: "error" */'@views/errorPage/404');`


### ç™½å±loading

* ä½¿ç”¨`webpack`æ’ä»¶`HtmlWebpackPlugin`å°†loadingèµ„æºæ’å…¥åˆ°é¡µé¢ä¸­
* 

### å›¾ç‰‡èµ„æºçš„ä¼˜åŒ–
>[ğŸ”¥ 2022 å‰ç«¯æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ - JavaScriptè¿›é˜¶ä¹‹è·¯ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000041753539)


#### å›¾ç‰‡å»¶è¿ŸåŠ è½½
åœ¨é¡µé¢ä¸­ï¼Œå…ˆä¸ç»™å›¾ç‰‡è®¾ç½®è·¯å¾„ï¼Œåªæœ‰å½“å›¾ç‰‡å‡ºç°åœ¨æµè§ˆå™¨çš„å¯è§†åŒºåŸŸæ—¶ï¼Œæ‰å»åŠ è½½çœŸæ­£çš„å›¾ç‰‡ï¼Œè¿™å°±æ˜¯å»¶è¿ŸåŠ è½½ã€‚
é¦–å…ˆå¯ä»¥å°†å›¾ç‰‡è¿™æ ·è®¾ç½®ï¼Œåœ¨é¡µé¢ä¸å¯è§æ—¶å›¾ç‰‡ä¸ä¼šåŠ è½½ï¼š

```html
<img data-src="https://avatars0.githubusercontent.com/u/22117876?s=460&u=7bd8f32788df6988833da6bd155c3cfbebc68006&v=4">
```

ç­‰é¡µé¢å¯è§æ—¶ï¼Œä½¿ç”¨ JS åŠ è½½å›¾ç‰‡ï¼š

```js
const img = document.querySelector('img')
img.src = img.dataset.src
```

è¿™æ ·å›¾ç‰‡å°±åŠ è½½å‡ºæ¥äº†ï¼Œå®Œæ•´çš„ä»£ç å¯ä»¥çœ‹ä¸€ä¸‹å‚è€ƒèµ„æ–™ã€‚
å‚è€ƒèµ„æ–™ï¼š

-  [web å‰ç«¯å›¾ç‰‡æ‡’åŠ è½½å®ç°åŸç†](https://juejin.im/entry/594a483061ff4b006c12cea1)


#### å“åº”å¼å›¾ç‰‡
å“åº”å¼å›¾ç‰‡çš„ä¼˜ç‚¹æ˜¯æµè§ˆå™¨èƒ½å¤Ÿæ ¹æ®å±å¹•å¤§å°è‡ªåŠ¨åŠ è½½åˆé€‚çš„å›¾ç‰‡ã€‚

é€šè¿‡Â `picture`Â å®ç°

```html
<picture>
    <source srcset="banner_w1000.jpg" media="(min-width: 801px)">
    <source srcset="banner_w800.jpg" media="(max-width: 800px)">
    <img src="banner_w800.jpg" alt="">
</picture>
```

é€šè¿‡Â `@media`Â å®ç°
```css
@media (min-width: 769px) {
    .bg {
        background-image: url(bg1080.jpg);
    }
}
@media (max-width: 768px) {
    .bg {
        background-image: url(bg768.jpg);
    }
}
```



#### é™ä½å›¾ç‰‡è´¨é‡
ä¾‹å¦‚ JPG æ ¼å¼çš„å›¾ç‰‡ï¼Œ100% çš„è´¨é‡å’Œ 90% è´¨é‡çš„é€šå¸¸çœ‹ä¸å‡ºæ¥åŒºåˆ«ï¼Œå°¤å…¶æ˜¯ç”¨æ¥å½“èƒŒæ™¯å›¾çš„æ—¶å€™ã€‚æˆ‘ç»å¸¸ç”¨ PS åˆ‡èƒŒæ™¯å›¾æ—¶ï¼Œ å°†å›¾ç‰‡åˆ‡æˆ JPG æ ¼å¼ï¼Œå¹¶ä¸”å°†å®ƒå‹ç¼©åˆ° 60% çš„è´¨é‡ï¼ŒåŸºæœ¬ä¸Šçœ‹ä¸å‡ºæ¥åŒºåˆ«ã€‚

å‹ç¼©æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯é€šè¿‡åœ¨çº¿ç½‘ç«™è¿›è¡Œå‹ç¼©ï¼ŒäºŒæ˜¯é€šè¿‡ webpack æ’ä»¶ image-webpack-loaderã€‚å®ƒæ˜¯åŸºäºÂ [imagemin](https://link.segmentfault.com/?enc=PAoQ%2BkIno1eABSR%2Bi3eflA%3D%3D.7PB%2BfABhYfIPZz805iNFLC73YrooJkNp9aa2idh1joQGH5yBIHzfJcMbYnfpBTfjjxTkQZMeKgY2vrQyQg9W1fLjUTq3CV9K0Xb4jeD%2B9UQ%3D)Â è¿™ä¸ª Node åº“æ¥å®ç°å›¾ç‰‡å‹ç¼©çš„ã€‚

ä½¿ç”¨å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦åœ¨`file-loader`ä¹‹ååŠ å…¥Â `image-webpack-loader`Â å³å¯ï¼š
```js
npm i -D image-webpack-loader
```

webpacké…ç½®å¦‚ä¸‹:
```bash
// config/webpack.base.js
// ...
module: {
    rules: [
        {
            test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,
            use: [
                {
                    loader: 'file-loader',
                    options: {
                        name: '[name]_[hash].[ext]',
                        outputPath: 'images/'
                    }
                },
                {
                    loader: 'image-webpack-loader',
                    options: {
                        // å‹ç¼© jpeg çš„é…ç½®
                        mozjpeg: {
                            progressive: true,
                            quality: 65
                        },
                        // ä½¿ç”¨ imagemin**-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­
                        optipng: {
                            enabled: false
                        },
                        // ä½¿ç”¨ imagemin-pngquant å‹ç¼© png
                        pngquant: {
                            quality: '65-90',
                            speed: 4
                        },
                        // å‹ç¼© gif çš„é…ç½®
                        gifsicle: {
                            interlaced: false
                        },
                        // å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼
                        webp: {
                            quality: 75
                        }
                    }
                }
            ]
        }
    ];
}
```


#### 3.å›¾ç‰‡æ‡’åŠ è½½
åœ¨é¡µé¢ä¸­ï¼Œå…ˆä¸ç»™å›¾ç‰‡è®¾ç½®è·¯å¾„ï¼Œåªæœ‰å½“å›¾ç‰‡å‡ºç°åœ¨æµè§ˆå™¨çš„å¯è§†åŒºåŸŸæ—¶ï¼Œæ‰å»åŠ è½½çœŸæ­£çš„å›¾ç‰‡ï¼Œè¿™å°±æ˜¯å»¶è¿ŸåŠ è½½ã€‚å¯¹äºå›¾ç‰‡å¾ˆå¤šçš„ç½‘ç«™æ¥è¯´ï¼Œä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨å›¾ç‰‡ï¼Œä¼šå¯¹ç”¨æˆ·ä½“éªŒé€ æˆå¾ˆå¤§çš„å½±å“ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å›¾ç‰‡å»¶è¿ŸåŠ è½½ã€‚


#### 4.ä½¿ç”¨CSS3ä»£æ›¿å›¾ç‰‡
æœ‰å¾ˆå¤šå›¾ç‰‡ä½¿ç”¨ CSS æ•ˆæœï¼ˆæ¸å˜ã€é˜´å½±ç­‰ï¼‰å°±èƒ½ç”»å‡ºæ¥ï¼Œè¿™ç§æƒ…å†µé€‰æ‹© CSS3 æ•ˆæœæ›´å¥½ã€‚å› ä¸ºä»£ç å¤§å°é€šå¸¸æ˜¯å›¾ç‰‡å¤§å°çš„å‡ åˆ†ä¹‹ä¸€ç”šè‡³å‡ ååˆ†ä¹‹ä¸€ã€‚
å‚è€ƒèµ„æ–™ï¼š
-   [imgå›¾ç‰‡åœ¨webpackä¸­ä½¿ç”¨](https://juejin.im/post/5cad99b5518825215d37b894)

#### ä½¿ç”¨webpackæ ¼å¼å›¾ç‰‡
> WebP çš„ä¼˜åŠ¿ä½“ç°åœ¨å®ƒå…·æœ‰æ›´ä¼˜çš„å›¾åƒæ•°æ®å‹ç¼©ç®—æ³•ï¼Œèƒ½å¸¦æ¥æ›´å°çš„å›¾ç‰‡ä½“ç§¯ï¼Œè€Œä¸”æ‹¥æœ‰è‚‰çœ¼è¯†åˆ«æ— å·®å¼‚çš„å›¾åƒè´¨é‡ï¼›åŒæ—¶å…·å¤‡äº†æ— æŸå’Œæœ‰æŸçš„å‹ç¼©æ¨¡å¼ã€Alpha é€æ˜ä»¥åŠåŠ¨ç”»çš„ç‰¹æ€§ï¼Œåœ¨ JPEG å’Œ PNG ä¸Šçš„è½¬åŒ–æ•ˆæœéƒ½ç›¸å½“ä¼˜ç§€ã€ç¨³å®šå’Œç»Ÿä¸€ã€‚

å‚è€ƒèµ„æ–™ï¼š
-  [WebP ç›¸å¯¹äº PNGã€JPG æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ](https://www.zhihu.com/question/27201061)



## å‹ç¼©

### Gzip
å¼€å¯æ–¹å¼å¯å‚è€ƒï¼š[nginxå¼€å¯gzip](https://juejin.cn/post/6844903605187641357 "https://juejin.cn/post/6844903605187641357")

è¿˜æœ‰ä¸€ç§æ–¹å¼ï¼šæ‰“åŒ…çš„æ—¶å€™ç”Ÿæˆgzæ–‡ä»¶ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ç«¯ï¼Œè¿™æ ·å°±ä¸éœ€è¦nginxæ¥å‹ç¼©äº†ï¼Œå¯ä»¥é™ä½æœåŠ¡å™¨å‹åŠ›ã€‚ å¯å‚è€ƒï¼š[gzipå‹ç¼©æ–‡ä»¶&webPacké…ç½®Compression-webpack-plugin](https://link.juejin.cn/?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000020976930 "https://segmentfault.com/a/1190000020976930")

### æœåŠ¡ç«¯å‹ç¼©




### JS/CSS/HTMLå‹ç¼©
å·¥ç¨‹åŒ–é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨å¯¹åº”çš„æ’ä»¶å³å¯ï¼Œwebpackçš„ä¸»è¦æœ‰ä¸‹é¢ä¸‰ä¸ªï¼š

-   UglifyJS
-   webpack-parallel-uglify-plugin
-   terser-webpack-plugin å…·ä½“ä¼˜ç¼ºç‚¹å¯å‚è€ƒï¼š[webpackå¸¸ç”¨çš„ä¸‰ç§JSå‹ç¼©æ’ä»¶](https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fqq_24147051%2Farticle%2Fdetails%2F103557728 "https://blog.csdn.net/qq_24147051/article/details/103557728")ã€‚`å‹ç¼©åŸç†`ç®€å•çš„è®²å°±æ˜¯å»é™¤ä¸€äº›ç©ºæ ¼ã€æ¢è¡Œã€æ³¨é‡Šï¼Œå€ŸåŠ©es6æ¨¡å—åŒ–çš„åŠŸèƒ½ï¼Œåšäº†ä¸€äº›`tree-shaking`çš„ä¼˜åŒ–ã€‚åŒæ—¶åšäº†ä¸€äº›ä»£ç æ··æ·†ï¼Œä¸€æ–¹é¢æ˜¯ä¸ºäº†æ›´å°çš„ä½“ç§¯ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸ºäº†æºç çš„å®‰å…¨æ€§ã€‚

csså‹ç¼©ä¸»è¦æ˜¯mini-css-extract-pluginï¼Œå½“ç„¶å‰é¢çš„jså‹ç¼©æ’ä»¶ä¹Ÿä¼šç»™ä½ åšå¥½csså‹ç¼©ã€‚ä½¿ç”¨å§¿åŠ¿ï¼š
```js
npm install --save-dev mini-css-extract-plugin
const MiniCssExtractPlugin = require("mini-css-extract-plugin");
plugins:[
 new MiniCssExtractPlugin({
       filename: "[name].css",
       chunkFilename: "[id].css"
   })
]
```

htmlå‹ç¼©å¯ä»¥ç”¨`HtmlWebpackPlugin`ï¼Œå•é¡µé¡¹ç›®å°±ä¸€ä¸ªindex.html,æ€§èƒ½æå‡å¾®ä¹å…¶å¾®~


### HTTP2é¦–éƒ¨å‹ç¼©
**http2çš„ç‰¹ç‚¹**
-   äºŒè¿›åˆ¶åˆ†å¸§
-   é¦–éƒ¨å‹ç¼©
-   æµé‡æ§åˆ¶
-   å¤šè·¯å¤ç”¨
-   è¯·æ±‚ä¼˜å…ˆçº§
-   æœåŠ¡å™¨æ¨é€`http2_push: 'xxx.jpg'`Â å…·ä½“å‡çº§æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œä¿®æ”¹ä¸€ä¸‹nginxé…ç½®ï¼Œæ–¹æ³•è¯·è‡ªè¡Œ`Google`











# ä¼˜åŒ–-webpack

é™¤äº†ä¸Šé¢æåˆ°çš„å‡ ä¸ªæ’ä»¶ä¹‹å¤–,è¿˜æœ‰ä»¥ä¸‹å‡ ç§:
### 1.DllPluginæå‡æ„å»ºé€Ÿåº¦

é€šè¿‡`DllPlugin`æ’ä»¶ï¼Œå°†ä¸€äº›æ¯”è¾ƒå¤§çš„ï¼ŒåŸºæœ¬å¾ˆå°‘å‡çº§çš„åŒ…æ‹†åˆ†å‡ºæ¥ï¼Œç”Ÿæˆ`xx.dll.js`æ–‡ä»¶,é€šè¿‡`manifest.json`å¼•ç”¨

`webpack.dll.config.js`
```js
const path = require("path");
const webpack = require("webpack");
module.exports = {
    mode: "production",
    entry: {
        react: ["react", "react-dom"],
    },
    output: {
        filename: "[name].dll.js",
        path: path.resolve(__dirname, "dll"),
        library: "[name]"
    },
    plugins: [
        new webpack.DllPlugin({
            name: "[name]",
            path: path.resolve(__dirname, "dll/[name].manifest.json")
        })
    ]
};
```

`package.json`
```js
"scripts": {
    "dll-build": "NODE_ENV=production webpack --config webpack.dll.config.js",
  },
```

### 2.splitChunksæ‹†åŒ…

```js
optimization: {
	splitChunks: {
			cacheGroups: {
					vendor: {
							name: 'vendor',
							test: /[\\/]node_modules[\\/]/,
							minSize: 0,
							minChunks: 1,
							priority: 10,
							chunks: 'initial'
					},
					common: {
							name: 'common',
							test: /[\\/]src[\\/]/,
							chunks: 'all',
							minSize: 0,
							minChunks: 2
					}
			}
	}
},
```


### å‡å°‘ ES6 è½¬ä¸º ES5 çš„å†—ä½™ä»£ç 
>Babel æ’ä»¶ä¼šåœ¨å°† ES6 ä»£ç è½¬æ¢æˆ ES5 ä»£ç æ—¶ä¼šæ³¨å…¥ä¸€äº›è¾…åŠ©å‡½æ•°
ä¸ºäº†ä¸è®©è¿™äº›è¾…åŠ©å‡½æ•°çš„ä»£ç é‡å¤å‡ºç°ï¼Œå¯ä»¥åœ¨ä¾èµ–å®ƒä»¬æ—¶é€šè¿‡Â `require('babel-runtime/helpers/createClass')`Â çš„æ–¹å¼å¯¼å…¥ï¼Œè¿™æ ·å°±èƒ½åšåˆ°åªè®©å®ƒä»¬å‡ºç°ä¸€æ¬¡ã€‚`babel-plugin-transform-runtime`Â æ’ä»¶å°±æ˜¯ç”¨æ¥å®ç°è¿™ä¸ªä½œç”¨çš„ï¼Œå°†ç›¸å…³è¾…åŠ©å‡½æ•°è¿›è¡Œæ›¿æ¢æˆå¯¼å…¥è¯­å¥ï¼Œä»è€Œå‡å° babel ç¼–è¯‘å‡ºæ¥çš„ä»£ç çš„æ–‡ä»¶å¤§å°ã€‚

é¦–å…ˆï¼Œå®‰è£…Â `babel-plugin-transform-runtime`Â ï¼š
```bash
npm install babel-plugin-transform-runtime â€”save-dev
```


ç„¶åï¼Œä¿®æ”¹Â `.babelrc`Â é…ç½®æ–‡ä»¶ä¸ºï¼š
```js
"plugins": [
    "transform-runtime"
]
```


### æå–å…¬å…±ä»£ç 
Webpack å†…ç½®äº†ä¸“é—¨ç”¨äºæå–å¤šä¸ªChunk ä¸­çš„å…¬å…±éƒ¨åˆ†çš„æ’ä»¶ CommonsChunkPluginï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ CommonsChunkPlugin çš„é…ç½®å¦‚ä¸‹ï¼š
```js
// æ‰€æœ‰åœ¨ package.json é‡Œé¢ä¾èµ–çš„åŒ…ï¼Œéƒ½ä¼šè¢«æ‰“åŒ…è¿› vendor.js è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚
new webpack.optimize.CommonsChunkPlugin({
  name: 'vendor',
  minChunks: function(module, count) {
    return (
      module.resource &&
      /\.js$/.test(module.resource) &&
      module.resource.indexOf(
        path.join(__dirname, '../node_modules')
      ) === 0
    );
  }
}),
// æŠ½å–å‡ºä»£ç æ¨¡å—çš„æ˜ å°„å…³ç³»
new webpack.optimize.CommonsChunkPlugin({
  name: 'manifest',
  chunks: ['vendor']
})
```


### æ¨¡æ¿é¢„ç¼–è¯‘


### æå–ç»„ä»¶çš„CSS
å½“ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶æ—¶ï¼Œç»„ä»¶å†…çš„ CSS ä¼šä»¥ style æ ‡ç­¾çš„æ–¹å¼é€šè¿‡ JavaScript åŠ¨æ€æ³¨å…¥ã€‚è¿™æœ‰ä¸€äº›å°å°çš„è¿è¡Œæ—¶å¼€é”€ï¼Œå¦‚æœä½ ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè¿™ä¼šå¯¼è‡´ä¸€æ®µ â€œæ— æ ·å¼å†…å®¹é—ªçƒ (fouc) â€ ã€‚å°†æ‰€æœ‰ç»„ä»¶çš„ CSS æå–åˆ°åŒä¸€ä¸ªæ–‡ä»¶å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿä¼šè®© CSS æ›´å¥½åœ°è¿›è¡Œå‹ç¼©å’Œç¼“å­˜ã€‚  
æŸ¥é˜…è¿™ä¸ªæ„å»ºå·¥å…·å„è‡ªçš„æ–‡æ¡£æ¥äº†è§£æ›´å¤šï¼š

-   [webpack + vue-loader](https://link.segmentfault.com/?enc=E6ETqJMKg%2FQSTpVKl1%2BB%2FA%3D%3D.U%2FgkROAzLHjCJjr1sKNgFq87F5XNJuMFnJ75rynfJ04fz0Ebvr3lOFOnsocltHIV3Qj8pEZTtz8dxF8RGWtcf9hNPiQcDPaU17A6xSIuP653sf9rzLlQ7me%2F%2BSo2V0KnbtLdNlwHZg6VG7rSFKimVw%3D%3D)Â ( vue-cli çš„ webpack æ¨¡æ¿å·²ç»é¢„å…ˆé…ç½®å¥½)
-   [Browserify + vueify](https://link.segmentfault.com/?enc=a8FbLJFWK11%2BEgt0lNLOqw%3D%3D.k7kNAi%2FnqSfAIi9wDUgq2rGxfn0RLRFmH%2FEgv03Oi3LCpTE0fZbN2stQt83CcxJY8XKwcYhTZ6tM7QUiUTdMK0R6J%2BE2uG0pJW%2B1P%2FMIC3h6BMr64VUWshmJ4q26o0H2)
-   [Rollup + rollup-plugin-vue](https://link.segmentfault.com/?enc=6uktLru3oS%2BI0DsgGLtqwQ%3D%3D.Lo2OZbicYbRL6MnJlabjlJ39HdAI56NCCk%2Fat7kVhBxV%2FnXKyGNtMRmr%2BKv4EFo4YHMcxv%2B5Uv7i4FTDdKJIJgzT6gWeIZqU4aC4vxIw09K8%2B5DWQD4M%2FbVhs5aQUXC5o3gaRUOzqdnENhNlHO6AB76KhUlbDc4vnBM32KWcBh0%3D)


### æŒ‰éœ€åŠ è½½ä»£ç 
é€šè¿‡ Vue å†™çš„å•é¡µåº”ç”¨æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„è·¯ç”±å¼•å…¥ã€‚å½“æ‰“åŒ…æ„å»ºçš„æ—¶å€™ï¼ŒJS åŒ…ä¼šå˜å¾—éå¸¸å¤§ï¼Œå½±å“åŠ è½½ã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œç„¶åå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”çš„ç»„ä»¶ï¼Œè¿™æ ·å°±æ›´åŠ é«˜æ•ˆäº†ã€‚




# ä¼˜åŒ–-Vue



# 



## å­—ä½“ä¼˜åŒ–

åŸå› æ˜¯å¼•å…¥çš„å­—ä½“æ–‡ä»¶å¤§,ä½†é¡µé¢ä¸Šå¹¶æ²¡æœ‰ä½¿ç”¨å¤ªå¤šçš„ç›¸å…³å­—ä½“,é€ æˆäº†å­—ä½“æµªè´¹.ä¸€ä¸ªå­—ä½“æ–‡ä»¶å¥½å‡ å…†.

### äº†è§£å„å¹³å°ä¸‹å­—ä½“æƒ…å†µ
[html - å¦‚ä½•ä¼˜é›…çš„é€‰æ‹©å­—ä½“(font-family) - å‰ç«¯å­¦ä¹  - SegmentFault æ€å¦](https://segmentfault.com/a/1190000006110417#articleHeader0)



### å­—ä½“ä¼˜åŒ–æ–¹æ¡ˆ
* font-spider
* fontmin
* è½¬æ¢æ ¼å¼

#### font-spider
åªèƒ½ä¼˜åŒ–å·²çŸ¥çš„å­—ä½“æ–‡ä»¶,å¦‚æœæ˜¯åœ¨çº¿å­—ä½“æˆ–è‡ªæ‰˜ç®¡å­—ä½“,éœ€è¦é¢å¤–çš„é…ç½®.

å¯¹è„šæ‰‹æ¶ç”Ÿæˆçš„å·¥å…·æ— æ•ˆ,å› ä¸ºæ­¤å·¥å…·çš„ä½¿ç”¨èŒƒå›´:
```md
å­—è››é€šè¿‡åˆ†ææœ¬åœ° CSS ä¸ HTML æ–‡ä»¶è·å– WebFont ä¸­æ²¡æœ‰ä½¿ç”¨çš„å­—ç¬¦ï¼Œå¹¶å°†è¿™äº›å­—ç¬¦æ•°æ®ä»å­—ä½“ä¸­åˆ é™¤ä»¥å®ç°å‹ç¼©ï¼ŒåŒæ—¶ç”Ÿæˆè·¨æµè§ˆå™¨ä½¿ç”¨çš„æ ¼å¼ã€‚
```
è€Œè„šæ‰‹æ¶ç”Ÿæˆçš„public/index.htmlä¸­,æ˜¯é€šè¿‡jsåŠ¨æ€æ’å…¥çš„å†…å®¹. æ‰€ä»¥æ— æ³•ä½¿ç”¨

ä¸è¿‡å¯ä»¥æ”¶é›†ä½¿ç”¨çš„æ–‡å­—,åœ¨æœ¬åœ°htmlé¡µé¢,è¿è¡Œfont-spiderç”Ÿæˆæ–°çš„æ–‡å­—æ–‡ä»¶æ¥å¤„ç†
ä¾‹å¦‚:
>[js vuecli react-app å­—ä½“å¼•å…¥åŠ è½½ç¼“æ…¢ ï¼Œfont-spider æ ¹æ®ä½¿ç”¨å­—ä½“ç”Ÿæˆæ–°çš„å­—ä½“æ–‡ä»¶_font-spider react-CSDNåšå®¢](https://blog.csdn.net/weixin_44544388/article/details/105507522)




#### fontmin
[Fontmin - Solution Of Font Subsetting (ecomfe.github.io)](https://ecomfe.github.io/fontmin/en)

ä¸¤ç§æ–¹æ¡ˆ, ä¸€ç§æ˜¯ä½¿ç”¨è½¯ä»¶è¿›è¡Œè½¬æ¢,å¦ä¸€ç§ä½¿ç”¨nodejsè°ƒç”¨æ¥è½¬æ¢.éƒ½ä¼šè·å¾—ç”Ÿæˆçš„å­—ä½“æ–‡ä»¶.


#### è½¬æ¢æ ¼å¼
