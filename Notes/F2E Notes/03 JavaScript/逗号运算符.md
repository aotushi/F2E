---
alias: 逗号运算符
---



## 运算符(操作符)

在JavaScript中描述了一组用于操作数据值的运算符，包括算术运算符（加号、减号）、关系运算符（大于、小于）、等于运算符（双等于、三等于）、位运算符（与、或、非）等。

由于JavaScript是弱类型语言，因此在运算符的使用上更加灵活，接下来就对其中比较重要的一些运算符进行详细的讲解。

### 逗号操作符

一方面它是基本的分隔符，例如，函数传递多个参数时，使用逗号分隔。另一方面它可以作为一个运算符，作用是将多个表达式连接起来，从左至右依次执行。

逗号作为运算符的表现形式为：表达式1，表达式2，表达式3，……，表达式n。

它的求解过程将按照从左至右的顺序进行，优先执行表达式1，然后执行表达式2……直到执行表达式n，最后返回表达式n的结果。

#### 定义

**逗号操作符** 对它的每个操作数求值（从左到右），并返回最后一个操作数的值。

#### 描述

当你想要在期望一个表达式的位置包含多个表达式时，可以使用逗号操作符。这个操作符最常用的一种情况是：`for` 循环中提供多个参数。

#### 示例

假设 `a` 是一个二维数组，每一维度包含 10 个元素，则下面的代码使用逗号操作符一次递增/递减两个变量。需要注意的是，`var` 语句中的逗号***不是***逗号操作符，因为它不是存在于一个表达式中。尽管从实际效果来看，那个逗号同逗号运算符的表现很相似。但确切地说，它是 `var` 语句中的一个特殊符号，用于把多个变量声明结合成一个。

```javascript
for (var i = 0, j = 9; i <= 9; i++, j--)
  document.writeln("a[" + i + "][" + j + "] = " + a[i][j]);
```



处理后返回

另一个使用逗号操作符的例子是在返回值前处理一些操作。如同下面的代码，只有最后一个表达式被返回，其他的都只是被求值。

```javascript
function myFunc () {
  var x = 0;

  return (x += 1, x); // the same of return ++x;
}
```



#### 逗号作为运算符的使用场景

<u>1. 在for循环中批量执行表达式</u>

逗号运算符在for循环中的使用场景是批量执行表达式。如果一个for循环中有多个变量需要执行表达式，可以通过逗号运算符一次性执行。

```js
for (var i = 0, j = 10; i < 10, j < 20; i++, j++) {
   console.log(i, j); 
}
```

一般在for循环的末尾处，只允许执行单个表达式。在这里我们通过逗号运算符，将i++和j++两个表达式视为同一个表达式，因此可以一次执行，处理i与j两个变量的递增。



<u>2. 用于交换变量，无须额外变量</u>  ???

在我们需要交换两个变量的值时，通常的做法如下所示。

```js
var a = 'a';
var b = 'b';
var c;

c = a;
a = b;
b = c;
```

借助临时变量c先存储a的值，然后将b值赋给a，再将c值赋给b，这样就可以实现变量交换了。

不允许使用额外的变量存储, 使用逗号运算符的方案。
```js
var a = 'a';
var b = 'b';
// 方案1
a = [b, b = a][0];
// 方案2
a = [b][b = a, 0];   // ?
```

在方案1中，前一部分[b, b = a]是一个一维数组，数组第二项值是b = a，实际会将a值赋给b，然后返回“'a'”，因此数组最终的值为['b', 'a']，然后取索引0的值为'b'，赋给变量a，最终实现a = 'b', b = 'a'。

在方案2中，前一部分[b]是一个一维数组，后一部分[b = a, 0]，实际会先执行b = a，将a值赋给b，然后返回“0”，因此后一部分实际是修改了b的值并返回索引“0”，最终是a = `[b][0]`，即a = b，实现了a与b的交换。 why?



<u>3. 用于简化代码</u>

因为逗号运算符可以使多个表达式先后执行，并且返回最后一个表达式的值，因此对于某些特定的函数，我们可以使用逗号运算符进行简写。

```js
if (x) {
   foo();
   return bar();
} else {
   return 1;
}
// 使用逗号运算符简写后
x ? (foo(), bar()) : 1;
```



<u>4. 用小括号保证逗号运算符的优先级</u>

在所有的运算符中，逗号运算符的优先级是最低的，因此对于某些涉及优先级的问题，我们需要使用到小括号，将含有逗号运算符的表达式括起来。

```js
var a = 20;
var b = ++a, 10;
console.log(b);  // Uncaught SyntaxError: Unexpected number
```

