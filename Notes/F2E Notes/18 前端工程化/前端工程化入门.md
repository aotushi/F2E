# 参考资料

1. [带你入门前端工程化](https://woai3c.github.io/introduction-to-front-end-engineering/)





# 统一规范

## 代码规范

### 如何制定代码规范

代码规范一般包含了代码格式规范、变量和函数命名规范、文档注释规范等等。



#### 一些比较出名的代码规范:

下面列举一些比较出名的 JavaScript 代码规范：

- [airbnb (101k star 英文版) (opens new window)](https://github.com/airbnb/javascript)，[airbnb-中文版(opens new window)](https://github.com/lin-123/javascript)
- [standard (24.5k star) 中文版(opens new window)](https://github.com/standard/standard/blob/master/docs/README-zhcn.md)
- [百度前端编码规范 3.9k star(opens new window)](https://github.com/ecomfe/spec)

CSS 代码规范也有不少，例如：

- [styleguide 2.3k star(opens new window)](https://github.com/fex-team/styleguide/blob/master/css.md)
- [spec 3.9k star(opens new window)](https://github.com/ecomfe/spec/blob/master/css-style-guide.md)







### 如何检查代码规范

目前有两种方法:

1. 使用工具校验代码格式。
2. 利用 code review 审查变量命名、注释。

原作者建议两个方法双管齐下,确保代码规范被严格执行.

个人着重看下,如何使用工具来校验代码规范,开发中涉及的工具有:

* ESLint
* Stylelint
* Prettier
* Vscode

### ESLint

> [ESlint入门篇 - 掘金 (juejin.cn)](https://juejin.cn/post/7257710391018455098?searchId=202307231701442A33B12B2408E5202B2F)

#### 是什么

**Lint**（Linter） 是一种静态代码分析工具，用于标记代码中某些编码错误、风格问题和不具结构性（易导致 bug）的代码。简单理解就是一个**代码检查器**，检查目标代码是否符合语法和规定的风格习惯。

**ESLint** 是基于 ECMAScript/JavaScript 语法的 **Lint**，能够：

- 查出 JavaScript 代码语法问题。
- 根据配置的规则，标记不符合规范的代码。
- 自动修复一些结构、风格问题。

ESLint 的特点是**灵活、高度自定义**，用户可以通过多种方式配置在项目中应用的规则和其它配置，也可以自定义自己的规则，还可以通过插件的方式拓展功能。



#### 安装/配置ESLint

**1.在项目根目录下命令行安装,不推荐全局安装**

```bash
npm i -D ESLint
```

**2.初始化lint文件,也就是在根目录下创建一个`.eslintc.js`或`.eslint`**

```bash
npx eslint --init
```

初始化会询问一系列配置问题,根据你的回答生成对应的`.eslinttrc.*`配置文件

初始化会出现3个选项:

* To check syntax only
* To check syntax and find problems
* To check syntax, find problems, and enforce code style 
  * Airbnb、Standard、Google(只有这个选项后续会出现JS代码规范选择)

```bash
$ npx eslint --init
✔ How would you like to use ESLint? · style
✔ What type of modules does your project use? · esm
✔ Which framework does your project use? · react
✔ Does your project use TypeScript? · No / Yes
✔ Where does your code run? · browser
✔ How would you like to define a style for your project? · guide
✔ Which style guide do you want to follow? · standard
✔ What format do you want your config file to be in? · JSON
```

生成的`.eslintrc.*`配置文件

> 添加'node'属性配置的来源链接: [ESlint+prettier - 掘金 (juejin.cn)](https://juejin.cn/post/7256822151499300921?searchId=202307231701442A33B12B2408E5202B2F)  已经不需要添加了

生成的文件已cjs结尾: 为什么生成的配置文件名称是`.eslintrc.cjs`而不是`.eslintrc.js`？

因为我们将项目定义为`ESM`，`eslit --init`会自动识别`type`，并生成兼容的配置文件名称，如果我们改回`.js`结尾，再运行`eslint`将会报错。出现这个问题是`eslint`内部使用了`require()`语法读取配置。

```js
module.exports = {
	env: {
		browser: true,
		es2021: true,
	},
	extends: ["eslint:recommended", "plugin:vue/vue3-essential"],
	overrides: [
		{
			env: {
				node: true,
			},
			files: [".eslintrc.{js,cjs}"],
			parserOptions: {
				sourceType: "script",
			},
		},
	],
	parserOptions: {
		ecmaVersion: "latest",
		sourceType: "module",
	},
	plugins: ["vue"],
	rules: {},
};
```







**3.在`package.json`中的`scripts`加上如下代码:**

```json
"lint": "eslint . --ext .vue,.js,.jsx,.cjs,.mjs,.ts,.tsx,.cts,.mts --fix --ignore-path .gitignore"

//    "scripts": {
        // eslint . 为指定lint当前项目中的文件
        // --ext 为指定lint哪些后缀的文件
        // --fix 开启自动修复
        "lint": "eslint . --ext .vue,.js,.ts,.jsx,.tsx --fix"
    }
```

然后执行`npm run lint`即可开始验证代码. 代码中的`test/ src/`是要进行校验的代码目录,这里指明了要简爱`test`, `src`目录下的代码.

但以上方法检查代码效率太低,每次都需要手动检查,并且报错了还得手动修改代码.



#### 使用ESLint

有两种方法使用:

1. 在命令行中使用
2. 在VSCode中使用



**在命令行中使用**

执行`npm run lint`检查,上面提到过,执行效率太低.

如果你执行`npx eslint --init`时选择了前两项中的某项,那么在运行`npm run lint`时不会执行代码格式化.





**在VSCode中安装插件**

> 注意，**插件并不内置 ESLint 核心代码**，而是自动查找项目中的 ESLint 库，在用户每次输入时调用`lint`命令，并在编辑器中标记代码问题。
>
> 这样的好处是，编辑器能兼容不同项目中不同版本的 ESLint，同时，能保证同一项目中，团队成员的 ESLint 版本一致。([来源](https://juejin.cn/post/7257710391018455098?searchId=202307231701442A33B12B2408E5202B2F))

安装插件`ESLint`,做如下配置(任选一项)

* 根目录下新建`.vscode/settings.json`文件
* 直接更改插件配置

```json
// .vscode/settings.json

{
    // 在每次保持时，自动 fix 可修复问题，可以在 VSCode 中设置保存时 fix：
    "editor.codeActionsOnSave": {
        "source.fixAll": false,
        "source.fixAll.eslint": true
    }
}
```



```json
//vscode插件配置json文件

"editor.codeActionsOnSave": {
        "source.fixAll.eslint": true,
    },
"eslint.validate": [
        "javascript",
        "javascriptreact",
        "typescript",
        "typescriptreact",
    ],
    "eslint.useESLintClass": true,
    // "eslint.quiet": true,
    //"eslint.options": {},
    //"workbench.editor.enablePreview": false,
    //"eslint.codeActionsOnSave.rules": null,
```

















































